<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="https://ajax4jsf.dev.java.net/ajax"
	xmlns:t="http://myfaces.apache.org/tomahawk">
<ui:composition template="/layout/plantillaGestor.xhtml">
	<ui:define name="tituloPagina">Idiomas</ui:define>

	<ui:define name="menuLateral">
		<ui:include src="../../layout/menuGeneral.xhtml" />
	</ui:define>

	<ui:define name="cuerpo">
		<h:form>
			<t:panelGrid columns="1" styleClass="gridContent"
				id="gridDatosGenerales">
				<rich:panel styleClass="gridContent"
					style="background-color: #FFFFFF;"
					rendered="#{registrarIdiomaMB.accionRealizada eq registrarIdiomaMB.acciones.ACCION_NUEVO
							or 
							registrarIdiomaMB.accionRealizada eq registrarIdiomaMB.acciones.ACCION_EDITAR
							or
							registrarIdiomaMB.accionRealizada eq registrarIdiomaMB.acciones.ACCION_VISUALIZAR}">
					<f:facet name="header">
						<h:panelGroup>
							<h:outputText value="#{msg['prf-registro-idioma-idiomas-de']} " />
							<h:outputText
								value="#{profesionalMB.profesionalBean.persona.nombres} " />
							<h:outputText
								value="#{profesionalMB.profesionalBean.persona.apellidoPaterno} " />
							<h:outputText
								value="#{profesionalMB.profesionalBean.persona.apellidoMaterno}" />
						</h:panelGroup>
					</f:facet>
					<h:panelGrid columns="6" styleClass="gridFormulario"
						columnClasses=",,celdaSeparadorFormulario,,">
						<h:outputLabel title="#{msg['prf-ayuda-idiomas-idioma']}"
							value="#{msg['prf-registro-idioma-formulario-idioma']}:"
							for="idiomaId" />
						<t:selectOneMenu id="idiomaId" forceId="true"
							value="#{registrarIdiomaMB.bean.idioma.id}"
							style="width: 100%; #{UtilBean.estiloCampoRequerido}">
							<f:selectItem itemLabel="#{msg['prf-listas-seleccion-todos']}"
								itemValue="0" />
							<f:selectItems value="#{registrarIdiomaMB.itemsIdioma}" />
							<f:validateLongRange minimum="1" />
						</t:selectOneMenu>

						<h:outputText value=" (*)" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<h:outputLabel
							value="#{msg['prf-registro-idioma-formulario-comprension']}:" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />

						<h:outputLabel
							title="#{msg['prf-ayuda-idiomas-comprension-auditiva']}"
							value="#{msg['prf-registro-idioma-formulario-comprension-auditiva']} :"
							for="comprensionAuditiva" />

						<t:selectOneMenu id="comprensionAuditiva" forceId="true"
							value="#{registrarIdiomaMB.bean.comprensionAuditiva}"
							style="width: 100%;">
							<f:selectItem itemLabel="#{msg['prf-listas-seleccion-todos']}"
								itemValue="0" />
							<f:selectItems value="#{registrarIdiomaMB.itemsNivelIdioma}" />
							<f:validateLongRange minimum="0" />
						</t:selectOneMenu>
						<rich:spacer width="10" height="5" title="espacio" />

						<h:outputLabel
							title="#{msg['prf-ayuda-idiomas-comprension-lectora']}"
							value="#{msg['prf-registro-idioma-formulario-comprension-lectora']} :"
							for="comprensionLectura" />
						<t:selectOneMenu id="comprensionLectura" forceId="true"
							value="#{registrarIdiomaMB.bean.comprensionLectura}"
							style="width: 100%;">
							<f:selectItem itemLabel="#{msg['prf-listas-seleccion-todos']}"
								itemValue="0" />
							<f:selectItems value="#{registrarIdiomaMB.itemsNivelIdioma}" />
							<f:validateLongRange minimum="0" />
						</t:selectOneMenu>
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />

						<h:outputLabel title="#{msg['prf-ayuda-idiomas-hablar']}"
							value="#{msg['prf-registro-idioma-formulario-hablar']} :"
							for="hablar" />
						<t:selectOneMenu id="hablar" forceId="true"
							value="#{registrarIdiomaMB.bean.hablar}" style="width: 100%;">
							<f:selectItem itemLabel="#{msg['prf-listas-seleccion-todos']}"
								itemValue="0" />
							<f:selectItems value="#{registrarIdiomaMB.itemsNivelIdioma}" />
							<f:validateLongRange minimum="0" />
						</t:selectOneMenu>
						<rich:spacer width="10" height="5" title="espacio" />

						<h:outputLabel title="#{msg['prf-ayuda-idiomas-escribir']}"
							value="#{msg['prf-registro-idioma-formulario-escribir']}:"
							for="escribir" />
						<t:selectOneMenu id="escribir" forceId="true"
							value="#{registrarIdiomaMB.bean.escribir}" style="width: 100%;">
							<f:selectItem itemLabel="#{msg['prf-listas-seleccion-todos']}"
								itemValue="0" />
							<f:selectItems value="#{registrarIdiomaMB.itemsNivelIdioma}" />
							<f:validateLongRange minimum="0" />
						</t:selectOneMenu>
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<rich:spacer width="10" height="5" title="espacio" />
						<h:outputLabel title="#{msg['prf-ayuda-idiomas-idioma-nativo']}"
							value="#{msg['prf-registro-idioma-formulario-idioma-nativo']}:"
							for="nativo" />

						<h:selectBooleanCheckbox id="nativo" title="Idioma nativo"
							value="#{registrarIdiomaMB.bean.idiomaNativo}" />

						<rich:spacer width="10" height="5" title="espacio" />
						<h:outputLabel title="#{msg['prf-ayuda-idiomas-overall']}"
							value="#{msg['prf-registro-idioma-formulario-overall']}:"
							for="overall" />
						<t:selectOneMenu id="overall" forceId="true"
							value="#{registrarIdiomaMB.bean.overall}"
							style="width: 100%; #{UtilBean.estiloCampoRequerido}">
							<f:selectItem itemLabel="#{msg['prf-listas-seleccion-todos']}"
								itemValue="0" />
							<f:selectItems value="#{registrarIdiomaMB.itemsNivelIdioma}" />
							<f:validateLongRange minimum="1" />

						</t:selectOneMenu>
						<h:outputText value=" (*)" />

					</h:panelGrid>
					<rich:spacer width="10" height="5" title="espacio" />
					<rich:spacer width="10" height="5" title="espacio" />
					<rich:spacer width="10" height="5" title="espacio" />
					<rich:spacer width="10" height="5" title="espacio" />

					<rich:separator lineType="beveled" height="3" width="100%"
						style="background-color: #808080; background-image: url('');"
						align="center" />
					<rich:spacer width="5" height="10" title="espacio" />

					<h:panelGrid columns="2" styleClass="gridContent"
						columnClasses=",columnaDerecha">
						<h:outputText value="" />
						<h:panelGroup>

							<a4j:commandButton
								rendered="#{sesionMB.usuarioSesion.rolAdministrador or sesionMB.usuarioSesion.rolConsultorABE or sesionMB.usuarioSesion.rolConsultorEmpleo}"
								value="#{registrarIdiomaMB.bean.validado eq UtilBean.parametros.ESTADO_VALIDACION_VALIDO ? 'Invalidar':'Validar'}"
								action="#"
								disabled="#{!(registrarIdiomaMB.bean.id gt 0) or (!(sesionMB.usuarioSesion.rolAdministrador or sesionMB.usuarioSesion.rolConsultorEmpleo or sesionMB.usuarioSesion.rolProfesional))}"
								actionListener="#{registrarIdiomaMB.validarDato}"
								reRender="gridDatosGenerales, dataIdiomas"
								styleClass="botonBuscar" />

							<rich:spacer width="5" height="5" title="espacio" />

							<a4j:commandButton
								value="#{msg['prf-registro-idioma-formulario-cancelar']}"
								actionListener="#{registrarIdiomaMB.cancelar}"
								reRender="gridDatosGenerales, dataIdiomas" immediate="true"
								styleClass="botonBuscar" />
							<rich:spacer width="10" height="5" title="espacio" />
							<a4j:commandButton
								value="#{msg['prf-registro-idioma-formulario-guardar']}"
								disabled="#{(registrarIdiomaMB.bean.validado eq UtilBean.parametros.ESTADO_VALIDACION_VALIDO and !(sesionMB.usuarioSesion.rolAdministrador or sesionMB.usuarioSesion.rolConsultorEmpleo)) or 
									(!(sesionMB.usuarioSesion.rolAdministrador or sesionMB.usuarioSesion.rolConsultorEmpleo or sesionMB.usuarioSesion.rolProfesional))}"
								actionListener="#{registrarIdiomaMB.guardar}"
								reRender="gridDatosGenerales, dataIdiomas"
								styleClass="botonBuscar"
								onclick="Richfaces.showModalPanel('modalEstado')"
								oncomplete="Richfaces.hideModalPanel('modalEstado')" />
						</h:panelGroup>
					</h:panelGrid>
				</rich:panel>
			</t:panelGrid>
		</h:form>



		<h:form>
			<rich:dataTable id="dataIdiomas" var="idioma"
				styleClass="gridContent" value="#{registrarIdiomaMB.idiomas}"
				columnClasses="columnaIzquierda,columnaIzquierda,columnaAcciones">
				<f:facet name="header">
					<h:panelGroup>
						<h:panelGrid columns="2" styleClass="gridContent"
							columnClasses="columnaIzquierda,columnaDerecha">
							<h:panelGroup
								rendered="#{!(registrarIdiomaMB.accionRealizada eq registrarIdiomaMB.acciones.ACCION_NUEVO
							or 
							registrarIdiomaMB.accionRealizada eq registrarIdiomaMB.acciones.ACCION_EDITAR
							or
							registrarIdiomaMB.accionRealizada eq registrarIdiomaMB.acciones.ACCION_VISUALIZAR)}">
								<h:outputText
									value="#{msg['prf-registro-idioma-lista-lista-idiomas']} " />
								<h:outputText
									value="#{profesionalMB.profesionalBean.persona.nombres} " />
								<h:outputText
									value="#{profesionalMB.profesionalBean.persona.apellidoPaterno} " />
								<h:outputText
									value="#{profesionalMB.profesionalBean.persona.apellidoMaterno}" />
							</h:panelGroup>

							<a4j:commandLink styleClass="columnaAcciones"
								rendered="#{sesionMB.usuarioSesion.rolAdministrador or sesionMB.usuarioSesion.rolConsultorEmpleo or sesionMB.usuarioSesion.rolProfesional}"
								actionListener="#{registrarIdiomaMB.nuevo}"
								reRender="gridDatosGenerales, dataIdiomas"
								title="Registrar Nuevo Idioma">
								<h:graphicImage value="/images/nuevo.png"
									alt="Registrar Nuevo Idioma" />
							</a4j:commandLink>
						</h:panelGrid>
					</h:panelGroup>
				</f:facet>
				<rich:column sortBy="#{idioma.idioma.descripcion}"
					sortOrder="ASCENDING"
					styleClass="#{idioma.validado eq UtilBean.parametros.ESTADO_VALIDACION_VALIDO ? '':'datoNoValidado'}">
					<f:facet name="header">
						<h:outputText value="#{msg['prf-registro-idioma-lista-idioma']}" />
					</f:facet>
					<h:panelGroup>
						<h:graphicImage
							rendered="#{(idioma.validado eq UtilBean.parametros.ESTADO_VALIDACION_VALIDO)}"
							value="/images/validado.png" alt="Validado" title="Validado" />
						<rich:spacer
							rendered="#{!(idioma.validado eq UtilBean.parametros.ESTADO_VALIDACION_VALIDO)}"
							width="16" height="5" title="espacio" />
						<rich:spacer width="5" height="5" title="espacio" />
					</h:panelGroup>
					<h:outputText rendered="#{idioma.idiomaNativo}"
						value="#{idioma.idioma.descripcion}" styleClass="textoResaltado" />
					<h:outputText rendered="#{!idioma.idiomaNativo}"
						value="#{idioma.idioma.descripcion}" />
				</rich:column>
				<rich:column sortBy="#{idioma.nivelIdioma.valor}"
					styleClass="#{idioma.validado eq UtilBean.parametros.ESTADO_VALIDACION_VALIDO ? '':'datoNoValidado'}">
					<f:facet name="header">
						<h:outputText value="Nivel" />
					</f:facet>
					<h:outputText value="#{idioma.nivelIdioma.valor}" />
				</rich:column>

				<rich:column
					styleClass="#{idioma.validado eq UtilBean.parametros.ESTADO_VALIDACION_VALIDO ? '':'datoNoValidado'}">
					<f:facet name="header">
						<h:outputText value="#{msg['prf-registro-idioma-lista-acciones']}" />
					</f:facet>
					<h:commandLink>
						<f:param id="idiomaPrm" name="idiomaPrm" value="#{idioma}" />
					</h:commandLink>
					<a4j:commandLink styleClass="columnaAcciones"
						rendered="#{!(sesionMB.usuarioSesion.rolAdministrador or sesionMB.usuarioSesion.rolConsultorEmpleo or sesionMB.usuarioSesion.rolProfesional)}"
						actionListener="#{registrarIdiomaMB.editar}"
						reRender="gridDatosGenerales" title="Ver Detalle">
						<h:graphicImage value="/images/ver.png" alt="Ver Detalle" />
					</a4j:commandLink>
					<a4j:commandLink styleClass="columnaAcciones"
						rendered="#{sesionMB.usuarioSesion.rolAdministrador or sesionMB.usuarioSesion.rolConsultorEmpleo or sesionMB.usuarioSesion.rolProfesional}"
						actionListener="#{registrarIdiomaMB.editar}"
						reRender="gridDatosGenerales" title="Editar Idioma">
						<h:graphicImage value="/images/editar.png" alt="Editar Idioma" />
					</a4j:commandLink>
					<rich:spacer width="10" height="5" title="espacio" />
					<a4j:commandLink styleClass="columnaAcciones"
						rendered="#{sesionMB.usuarioSesion.rolAdministrador or sesionMB.usuarioSesion.rolConsultorEmpleo or sesionMB.usuarioSesion.rolProfesional}"
						onclick="if (!confirmar('#{tipo.dscrpcon}')) return false;"
						actionListener="#{registrarIdiomaMB.eliminar}"
						title="Eliminar Idioma" reRender="gridDatosGenerales,dataIdiomas">
						<h:graphicImage value="/images/eliminar.png" alt="Eliminar Idioma" />
					</a4j:commandLink>
				</rich:column>

			</rich:dataTable>
		</h:form>





	</ui:define>
</ui:composition>

</html>